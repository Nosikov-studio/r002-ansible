# r002-ansible
Автоматизация создания сайта на Ansible для проекта r001-lemp на сервере, параметры связи с которым в файле hosts.ini.
Для роли mysqlinstall имеется зашифрованный файл mysqlinstall/vars/main.yml, в котором есть параметры:
---------------------------------
root_password: 
admin_user: 
admin_password: 
db_name: expo
password_validation_policy: 1
---------------------------------
Поэтому для запуска плейбука нужен пароль. Так, можно в локальной папке проекта создать файл pass, в котором сохранить пароль (которым защифрован файл с переменными mysqlinstall/vars/main.yml), и добавить файл .gitignore, в котором сохранить имя этого файла (pass). Тогда запускаться плейбук будет без ввода пароля вручную так: ansible-playbook --vault-password-file pass  p3-site.yml
---------------------------------
Используется php8.1 (могут быть накладки). 
---------------------------------
Были проблемы в роли siteinstall с доступом по ssh при скачки файлов с github. 
Еще может выдать ошибку роль letsencrypt, если слишком часто устанавливать сертификат (часто запускать плейбук с установкой сертификата). 
---------------------------------